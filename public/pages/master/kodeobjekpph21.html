<div class="panel panel-listing">
    <ol class="breadcrumb breadcrumb-arrow">
        <li class="breadcrumb-item"><a href="/#/">Home</a></li>
        <li class="breadcrumb-item active"><a href="/#/master/kodeobjekpph21">Master Kode Objek PPH21</a></li>
    </ol>
    <header class="panel-heading">
        <div class="panel-actions pt-10">
            <button id="button-add" class="btn btn-primary" data-target="#modal-edit" data-toggle="modal" type="button">
                <i class="icon md-account-add" aria-hidden="true"></i> Tambah
            </button>
        </div>
        <h3 class="panel-title">Data Kode Objek PPH21</h3>
    </header>
    <div class="panel-body">
        <table class="table table-bordered table-striped table-responsive w-full" cellspacing="0" id="table_data">
            <thead>
                <tr>
                    <th>No.</th>
                    <th class="text-center">ID KODE OBJEK PPH21</th>
                    <th class="text-center">KODE OBJEK PAJAK</th>
                    <th class="text-center">NAMA OBJEK PAJAK</th>
                    <th class="text-center">DEEMED</th>
                    <th class="text-center">TARIF</th>
                </tr>
            </thead>
        </table>
    </div>
</div>

<div class="card d-none panel-view">
    <ol class="breadcrumb breadcrumb-arrow">
        <li class="breadcrumb-item"><a href="/#/">Home</a></li>
        <li class="breadcrumb-item"><a href="/#/master/kode-objek-pph21">Master Kode Objek PPH21</a></li>
        <li class="breadcrumb-item active breadcrumb_detail"></li>
    </ol>
    <div class="card-header bg-primary text-white">
        Kode Objek PPH21 Details
    </div>
    <div class="card-body">
        <table class="table table-bordered">
            <tbody>
                <tr>
                    <th>ID Kode Objek PPH21</th>
                    <td id="ID_KODE_OBJEK_PPH21"></td>
                </tr>
                <tr>
                    <th>Kode Objek Pajak</th>
                    <td id="KODE_OBJEK_PAJAK"></td>
                </tr>
                <tr>
                    <th>Nama Objek Pajak</th>
                    <td id="NAMA_OBJEK_PAJAK"></td>
                </tr>
                <tr>
                    <th>Deemed</th>
                    <td id="DEEMED"></td>
                </tr>
                <tr>
                    <th>Tarif</th>
                    <td id="TARIF"></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    let masterKodeObjekPPH21URL = 'master/kode-objek-pph21';
    function loadListing() {
        url = `/api/v1.0/${masterKodeObjekPPH21URL}/list`;
        jsonData = [
            { data: "no", width: "10px", class: "text-center" },
            { data: "ID_KODE_OBJEK_PPH21", visible: false },
            { data: "KODE_OBJEK_PAJAK" },
            { data: "NAMA_OBJEK_PAJAK", width: "150px" },
            { data: "DEEMED" },
            { data: "TARIF" },
        ];
        data_table(url, jsonData);
    }

    function loadKodeObjekPPH21ForEditing(kodeobjekpph21Id) {
        console.log("edit " + kodeobjekpph21Id);
    }

    function displayEmployeeDetails(kodeobjekpph21Id) {
        Global.ajax(`master/kode-objek-pph21/${kodeobjekpph21Id}`, "GET", null, (response) => {
            renderKodeObjekPPH21Details(response.data);
        });
    }
    function renderKodeObjekPPH21Details(data) {
        $(".panel-view").removeClass('d-none');

        Object.keys(data).forEach(key => {
            if (document.getElementById(key)) {
                document.getElementById(key).textContent = data[key];
            }
        });
        $(".breadcrumb_detail").html(data.NAMA);
    }

    $('#table_data').on('dblclick','tr',function(e){
        e.stopPropagation()                       
        var data = table.row(this).data();
        let redirectUrl = `${CONFIG.webUrl}/${masterKodeObjekPPH21URL}?id=${data.ID_KODE_OBJEK_PPH21}&action=view`;

        window.location.href = redirectUrl;

    });
</script>